{
  "version": "2.0.0",
  "tasks": [
    // ==================== D√âVELOPPEMENT ====================
    {
      "label": "üöÄ Turbo Dev - All",
      "type": "shell",
      "command": "pnpm",
      "args": ["dev"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false
      },
      "problemMatcher": [],
      "isBackground": true,
      "detail": "D√©marre tous les services en mode d√©veloppement"
    },
    {
      "label": "üåê Dev - Web Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["dev:web"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "isBackground": true,
      "detail": "D√©marre uniquement l'application web Next.js"
    },
    {
      "label": "üîß Dev - API Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["dev:api"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "isBackground": true,
      "detail": "D√©marre uniquement l'API NestJS"
    },

    // ==================== BUILD ====================
    {
      "label": "üî® Build - All",
      "type": "shell",
      "command": "pnpm",
      "args": ["build"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"],
      "detail": "Build tous les packages avec Turbo"
    },
    {
      "label": "üåê Build - Web Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["build", "--filter=@erp/web"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"],
      "detail": "Build uniquement l'application web"
    },
    {
      "label": "üì¶ Build - Packages Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["build", "--filter=\"!@erp/web\"", "--filter=\"!@erp/api\""],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"],
      "detail": "Build uniquement les packages partag√©s"
    },

    // ==================== TESTS ====================
    {
      "label": "üß™ Test - All",
      "type": "shell",
      "command": "pnpm",
      "args": ["test"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "problemMatcher": ["$jest"],
      "detail": "Ex√©cute tous les tests"
    },
    {
      "label": "üß™ Test - Watch",
      "type": "shell",
      "command": "pnpm",
      "args": ["test:watch"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated"
      },
      "problemMatcher": ["$jest"],
      "isBackground": true,
      "detail": "Tests en mode watch"
    },
    {
      "label": "üìä Test - Coverage",
      "type": "shell",
      "command": "pnpm",
      "args": ["test:coverage"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": ["$jest"],
      "detail": "Tests avec rapport de couverture"
    },

    // ==================== QUALIT√â CODE ====================
    {
      "label": "üîç Lint - All",
      "type": "shell",
      "command": "pnpm",
      "args": ["lint"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$eslint-stylish"],
      "detail": "V√©rification ESLint sur tout le projet"
    },
    {
      "label": "üîß Lint - Fix All",
      "type": "shell",
      "command": "pnpm",
      "args": ["lint:fix"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": ["$eslint-stylish"],
      "detail": "Correction automatique ESLint"
    },
    {
      "label": "üé® Format Code",
      "type": "shell",
      "command": "pnpm",
      "args": ["format"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Formatage avec Prettier"
    },
    {
      "label": "üîç Type Check",
      "type": "shell",
      "command": "pnpm",
      "args": ["type-check"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"],
      "detail": "V√©rification TypeScript"
    },

    // ==================== NETTOYAGE (RIMRAF) ====================
    {
      "label": "üßπ Clean - Standard",
      "type": "shell",
      "command": "pnpm",
      "args": ["clean"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Nettoyage standard avec rimraf et r√©installation"
    },
    {
      "label": "üóëÔ∏è Clean - Cache Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["clean:cache"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Supprime uniquement les caches (.turbo, node_modules/.cache)"
    },
    {
      "label": "üî® Clean - Build Only",
      "type": "shell",
      "command": "pnpm",
      "args": ["clean:build"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Supprime uniquement les dossiers de build"
    },
    {
      "label": "üí£ Clean - Deep Clean",
      "type": "shell",
      "command": "pnpm",
      "args": ["clean:deep"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Nettoyage complet incluant tous les node_modules"
    },
    {
      "label": "üîÑ Reset Project",
      "type": "shell",
      "command": "pnpm",
      "args": ["reset"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Reset complet du projet"
    },

    // ==================== BASE DE DONN√âES ====================
    {
      "label": "üóÑÔ∏è DB - Run Migrations",
      "type": "shell",
      "command": "pnpm",
      "args": ["db:migrate"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Ex√©cute les migrations de base de donn√©es"
    },
    {
      "label": "üå± DB - Seed Data",
      "type": "shell",
      "command": "pnpm",
      "args": ["db:seed"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Charge les donn√©es de test"
    },
    {
      "label": "üîÑ DB - Generate Migration",
      "type": "shell",
      "command": "pnpm",
      "args": ["db:migrate:generate"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "G√©n√®re une nouvelle migration"
    },

    // ==================== POSTGRESQL ====================
    {
      "label": "üóÑÔ∏è Test connexion PostgreSQL",
      "type": "shell",
      "command": "psql",
      "args": [
        "-h",
        "localhost",
        "-U",
        "postgres",
        "-d",
        "postgres",
        "-c",
        "SELECT version();"
      ],
      "windows": {
        "options": {
          "env": {
            "PGPASSWORD": "postgres"
          }
        }
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Teste la connexion √† PostgreSQL"
    },
    {
      "label": "üîÑ Red√©marrer PostgreSQL",
      "type": "shell",
      "command": "sudo",
      "args": ["systemctl", "restart", "postgresql"],
      "windows": {
        "command": "powershell",
        "args": ["-Command", "Restart-Service postgresql*"]
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Red√©marre le service PostgreSQL"
    },

    // ==================== SETUP & MAINTENANCE ====================
    {
      "label": "üîç V√©rification Environnement Complet",
      "type": "shell",
      "command": "node",
      "args": ["scripts/debug-info.js"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "new",
        "clear": true
      },
      "problemMatcher": [],
      "detail": "Diagnostic complet de l'environnement"
    },
    {
      "label": "üöÄ Setup Complet + PostgreSQL",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "${workspaceFolder}/scripts/full-setup.ps1"
      ],
      "linux": {
        "command": "bash",
        "args": ["${workspaceFolder}/scripts/full-setup.sh"]
      },
      "osx": {
        "command": "bash",
        "args": ["${workspaceFolder}/scripts/full-setup.sh"]
      },
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "new",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": [],
      "detail": "Configuration compl√®te du projet"
    },
    {
      "label": "üóÑÔ∏è Configuration PostgreSQL uniquement",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "${workspaceFolder}/scripts/setup-postgres.ps1"
      ],
      "linux": {
        "command": "bash",
        "args": ["${workspaceFolder}/scripts/setup-postgres.sh"]
      },
      "osx": {
        "command": "bash",
        "args": ["${workspaceFolder}/scripts/setup-postgres.sh"]
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "new"
      },
      "problemMatcher": [],
      "detail": "Configuration PostgreSQL uniquement"
    },

    // ==================== ANALYSE & RAPPORTS ====================
    {
      "label": "üìä Bundle Analyzer",
      "type": "shell",
      "command": "pnpm",
      "args": ["analyze", "--filter=@erp/web"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Analyse de la taille du bundle"
    },
    {
      "label": "üìã V√©rification des d√©pendances",
      "type": "shell",
      "command": "pnpm",
      "args": ["deps:full-check"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Audit complet des d√©pendances"
    },
    {
      "label": "üîí Security Audit",
      "type": "shell",
      "command": "pnpm",
      "args": ["security:audit"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Audit de s√©curit√© des d√©pendances"
    },

    // ==================== UTILITAIRES ====================
    {
      "label": "üíæ Sauvegarde configuration",
      "type": "shell",
      "command": "git",
      "args": ["add", ".vscode/", "scripts/", "*.json", "*.md"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "none",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Sauvegarde les fichiers de configuration"
    },
    {
      "label": "üì¶ Install Dependencies",
      "type": "shell",
      "command": "pnpm",
      "args": ["install"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Installation des d√©pendances"
    }
  ]
}
