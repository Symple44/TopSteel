/**
 * Fix English translations - replace French text and [EN] markers
 */
import fs from 'fs'
import path from 'path'
import { fileURLToPath } from 'url'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

const EN_DIR = path.join(__dirname, '..', 'translations', 'en')

// Replacements map: French -> English
const REPLACEMENTS = {
  // [EN] markers
  "[EN] Êtes-vous sûr de vouloir activer cette configuration ? La configuration actuelle sera désactivée.": "Are you sure you want to activate this configuration? The current configuration will be deactivated.",
  "[EN] Êtes-vous sûr de vouloir supprimer cette configuration ?": "Are you sure you want to delete this configuration?",
  "[EN] Menu par défaut": "Default menu",
  "[EN] Commencez par créer une nouvelle configuration de menu ou utilisez le menu par défaut.": "Start by creating a new menu configuration or use the default menu.",
  "[EN] Créé le": "Created on",
  "[EN] Modifié le": "Updated on",
  "[EN] Création...": "Creating...",
  "[EN] L\\'éditeur de menu avancé sera disponible dans une prochaine version.": "The advanced menu editor will be available in a future version.",
  "[EN] Ajoutez des éléments via l\\'éditeur de configuration": "Add items via the configuration editor",
  "[EN] Décrivez cette configuration...": "Describe this configuration...",
  "[EN] Éléments du Menu": "Menu Items",
  "[EN] Ajoutez votre premier élément de menu": "Add your first menu item",
  "[EN] Nouvel élément": "New item",
  "[EN] Accéder": "Access",
  "[EN] Gérez les utilisateurs, les permissions, les configurations et les paramètres système": "Manage users, permissions, configurations and system settings",
  "[EN] Configurez les rôles utilisateurs et leurs permissions d\\'accès aux modules": "Configure user roles and their module access permissions",
  "[EN] Permissions du rôle": "Role permissions",
  "[EN] Êtes-vous sûr de vouloir supprimer ce rôle ?": "Are you sure you want to delete this role?",
  "[EN] Décrivez les responsabilités de ce rôle...": "Describe the responsibilities of this role...",
  "[EN] Niveaux d\\'accès": "Access levels",
  "[EN] Les différents niveaux d\\'accès disponibles dans le système": "The different access levels available in the system",
  "[EN] Accès administrateur complet": "Full administrator access",
  "[EN] Configurez les permissions pour le rôle": "Configure permissions for the role",
  "[EN] Niveau d\\'accès": "Access level",
  "[EN] Autorisé": "Authorized",
  "[EN] Organisez vos utilisateurs en groupes avec des rôles partagés": "Organize your users into groups with shared roles",
  "[EN] Êtes-vous sûr de vouloir supprimer ce groupe ?": "Are you sure you want to delete this group?",
  "[EN] rôles": "roles",
  "[EN] Décrivez le rôle et les responsabilités de ce groupe...": "Describe the role and responsibilities of this group...",
  "[EN] Sélectionnez les rôles qui seront automatiquement attribués aux membres du groupe": "Select the roles that will be automatically assigned to group members",
  "[EN] Ajouté le": "Added on",
  "[EN] Ajouté par": "Added by",
  "[EN] Opération": "Operation",
  "[EN] Tout sélectionner": "Select all",
  "[EN] Dernière connexion": "Last login",
  "[EN] Sélectionner une opération": "Select an operation",
  "[EN] Assigner des rôles": "Assign roles",
  "[EN] Retirer des rôles": "Remove roles",
  "[EN] Assigner à des groupes": "Assign to groups",
  "[EN] Activer les comptes utilisateurs sélectionnés": "Activate selected user accounts",
  "[EN] Désactiver les comptes": "Deactivate accounts",
  "[EN] Désactiver les comptes utilisateurs sélectionnés": "Deactivate selected user accounts",
  "[EN] Envoyer des liens de réinitialisation par email": "Send reset links by email",
  "[EN] Changer le département": "Change department",
  "[EN] Mettre à jour le département des utilisateurs": "Update user department",
  "[EN] Raison de l\\'opération (optionnel)": "Reason for operation (optional)",
  "[EN] Décrivez la raison de cette opération en masse...": "Describe the reason for this bulk operation...",
  "[EN] Révision de l\\'opération": "Operation review",
  "[EN] Opération sélectionnée": "Selected operation",
  "[EN] Cette opération va affecter": "This operation will affect",
  "[EN] Connectée": "Connected",
  "[EN] Créé": "Created",
  "[EN] Activité": "Activity",
  "[EN] Problématique": "Problematic",
  "[EN] Logo d\\'entreprise mis à jour avec succès": "Company logo updated successfully",
  "[EN] PNG, JPG, SVG, WebP jusqu\\'à 5MB": "PNG, JPG, SVG, WebP up to 5MB",
  "[EN] Expiration du token de rafraîchissement JWT": "JWT refresh token expiration",
  "[EN] Gérez vos préférences de notification et d\\'alertes": "Manage your notification and alert preferences",
  "[EN] Êtes-vous sûr de vouloir réinitialiser tous les paramètres ?": "Are you sure you want to reset all settings?",
  "[EN] Sauvegardé": "Saved",
  "[EN] Vous avez des modifications non sauvegardées. N\\'oubliez pas de sauvegarder vos préférences.": "You have unsaved changes. Don't forget to save your preferences.",
  "[EN] Niveau de sécurité": "Security level",
  "[EN] Configurez vos préférences, votre profil et les paramètres de votre compte": "Configure your preferences, profile and account settings",
  "[EN] Connecté en tant que": "Connected as",

  // Mixed French phrases
  "Edit l\\'utilisateur": "Edit user",
  "Delete l\\'utilisateur": "Delete user",
  "Loading des configurations...": "Loading configurations...",
  "Create une nouvelle configuration de menu": "Create a new menu configuration",
  "Nonee configuration de menu trouvée": "No menu configuration found",
  "Configuration Active": "Active Configuration",
  "Activer": "Activate",
  "Name de la configuration": "Configuration name",
  "Description de la configuration (optionnel)": "Configuration description (optional)",
  "Sauvegarde...": "Saving...",
  "Pour le moment, vous pouvez exporter/importer des configurations.": "For now, you can export/import configurations.",
  "Loading de l\\'aperçu...": "Loading preview...",
  "None élément dans cette configuration": "No items in this configuration",
  "Edit la Configuration": "Edit Configuration",
  "Ex: Menu Production, Menu Commercial...": "E.g.: Production Menu, Sales Menu...",
  "Add un élément": "Add an item",
  "None élément de menu configuré": "No menu items configured",
  "Loading des données de droits...": "Loading rights data...",
  "Information générales et coordonnées": "General information and contact details",
  "Name de l\\'entreprise": "Company name",
  "TVA Intracommunautaire": "VAT Number",
  "Logo de l\\'entreprise": "Company logo",
  "Download un logo": "Upload a logo",
  "Gestion des Roles & Permissions": "Roles & Permissions Management",
  "Loading des rôles...": "Loading roles...",
  "New rôle": "New role",
  "Create un nouveau rôle": "Create a new role",
  "Edit le rôle": "Edit role",
  "utilisateurs": "users",
  "Name du rôle": "Role name",
  "Ex: Deviseur, Superviseur...": "E.g.: Estimator, Supervisor...",
  "Role actif": "Active role",
  "None accès au module": "No module access",
  "Consultation uniquement": "Read only",
  "Lecture et modification": "Read and write",
  "Lecture, modification et suppression": "Read, write and delete",
  "Loading des permissions...": "Loading permissions...",
  "Gestion des Groups": "Group Management",
  "Loading des groupes...": "Loading groups...",
  "New groupe": "New group",
  "Create un nouveau groupe": "Create a new group",
  "Edit le groupe": "Edit group",
  "Details du groupe": "Group details",
  "Assignation en masse": "Bulk assignment",
  "Assignation en masse pour ce groupe": "Bulk assignment for this group",
  "membres": "members",
  "Name du groupe": "Group name",
  "Ex: Team commerciale...": "E.g.: Sales team...",
  "Type de groupe": "Group type",
  "Roles par défaut": "Default roles",
  "Group actif": "Active group",
  "All les groupes": "All groups",
  "Par type": "By type",
  "Information du groupe": "Group information",
  "Members du groupe": "Group members",
  "Add un membre": "Add a member",
  "Add un membre au groupe": "Add a member to the group",
  "Expire le": "Expires on",
  "None membre dans ce groupe": "No members in this group",
  "Roles du groupe": "Group roles",
  "Gestion en masse des profils utilisateurs": "Bulk user profile management",
  "Filtres et recherche": "Filters and search",
  "Recherche": "Search",
  "Name, prénom, email...": "Name, first name, email...",
  "All les départements": "All departments",
  "All les rôles": "All roles",
  "Add des rôles aux utilisateurs sélectionnés": "Add roles to selected users",
  "Delete des rôles des utilisateurs sélectionnés": "Remove roles from selected users",
  "Add les utilisateurs à des groupes": "Add users to groups",
  "Retirer des groupes": "Remove from groups",
  "Delete les utilisateurs des groupes": "Remove users from groups",
  "Activer les comptes": "Activate accounts",
  "Reset mots de passe": "Reset passwords",
  "Roles concernés": "Affected roles",
  "Groups concernés": "Affected groups",
  "New département": "New department",
  "Ex: Production, Commercial, Technique...": "E.g.: Production, Sales, Technical...",
  "Envoyer une notification par email": "Send email notification",
  "Users concernés": "Affected users",
  "utilisateur(s). Assurez-vous que cette action est bien intentionnelle.": "user(s). Make sure this action is intentional.",
  "Les utilisateurs recevront une notification par email.": "Users will receive an email notification.",
  "Next : Opération": "Next: Operation",
  "Next : Configuration": "Next: Configuration",
  "Next : Révision": "Next: Review",
  "Confirm l\\'opération": "Confirm operation",
  "Traitement...": "Processing...",
  "Gestion des Connections": "Connection Management",
  "connexion(s) tenant": "tenant connection(s)",
  "Toutes": "All",
  "Errors": "Errors",
  "No initialisée": "Not initialized",
  "Initializedes": "Initialized",
  "Queries total": "Total queries",
  "Queries actives": "Active queries",
  "Session active": "Active session",
  "Status de Health": "Health Status",
  "Actions Rapides": "Quick Actions",
  "Nonee connexion tenant active": "No active tenant connection",
  "Nonee connexion ne correspond aux filtres": "No connection matches the filters",
  "Create une connexion": "Create a connection",
  "Custome": "Custom",
  "Configurez les informations de votre entreprise": "Configure your company information",
  "Error lors de l\\'upload du logo": "Error uploading logo",
  "Expiration du token JWT": "JWT token expiration",
  "Preferences sauvegardées avec succès!": "Preferences saved successfully!",
  "Error lors de la sauvegarde des préférences": "Error saving preferences",
  "Personnalisez l\\'interface et configurez la langue": "Customize the interface and configure language",
  "Information du compte": "Account information",
  "Name complet:": "Full name:",

  // Additional mixed phrases (round 2)
  "Bulk assignment pour ce groupe": "Bulk assignment for this group",
  "Add a member au groupe": "Add a member to the group",
  "Gestion en masse des profils users": "Bulk user profile management",
  "Add des rôles aux users sélectionnés": "Add roles to selected users",
  "Delete des rôles des users sélectionnés": "Remove roles from selected users",
  "Add les users à des groupes": "Add users to groups",
  "Delete les users des groupes": "Remove users from groups",
  "Activate les comptes": "Activate accounts",
  "Deactivate accounts users sélectionnés": "Deactivate selected user accounts",
  "Operation sélectionnée": "Selected operation",
  "Attention": "Warning",
  "Les users recevront une notification par email.": "Users will receive an email notification.",
  "[EN] Gérer les users, rôles et permissions": "Manage users, roles and permissions",
  "Gestion des users": "User management",
  "[EN] Gestion des rôles": "Role management",
  "Gestion des groupes": "Group management",
  "[EN] Vérification de l\\'authentification...": "Checking authentication...",

  // Round 3 - common.ts, dashboard.ts, navigation.ts, profile.ts, rbac.ts
  "[EN] Sélectionner une société": "Select a company",
  "[EN] Impossible de charger les sociétés disponibles": "Unable to load available companies",
  "[EN] Société non trouvée": "Company not found",
  "[EN] Contactez votre administrateur pour obtenir les accès nécessaires.": "Contact your administrator to get the necessary access.",
  "[EN] Connecté à {{name}}": "Connected to {{name}}",
  "[EN] Impossible de se connecter à cette société": "Unable to connect to this company",
  "[EN] Affectera tous les onglets ouverts ({{count}} détecté(s)).": "Will affect all open tabs ({{count}} detected).",
  "[EN] Définir comme société par défaut": "Set as default company",
  "[EN] Choisissez la société sur laquelle vous souhaitez travailler.": "Choose the company you want to work with.",
  "[EN] Gérer les comptes users": "Manage user accounts",
  "[EN] Bienvenue sur la plateforme ERP. Utilisez les modules ci-dessous pour gérer votre organisation.": "Welcome to the ERP platform. Use the modules below to manage your organization.",
  "[EN] Matériaux": "Materials",
  "[EN] Êtes-vous sûr de vouloir réinitialiser vos informations ?": "Are you sure you want to reset your information?",
  "[EN] Profil mis à jour avec succès": "Profile updated successfully",
  "[EN] Photo de profil mise à jour": "Profile photo updated",
  "[EN] Propriétaire": "Owner",
  "[EN] Opérateur": "Operator",
  "[EN] Invité": "Guest",
}

// Process each file
const files = fs.readdirSync(EN_DIR).filter(f => f.endsWith('.ts'))

for (const file of files) {
  const filePath = path.join(EN_DIR, file)
  let content = fs.readFileSync(filePath, 'utf-8')
  let modified = false

  for (const [french, english] of Object.entries(REPLACEMENTS)) {
    if (content.includes(french)) {
      content = content.split(french).join(english)
      modified = true
    }
  }

  if (modified) {
    fs.writeFileSync(filePath, content)
    console.log(`Updated: ${file}`)
  }
}

console.log('Done!')
